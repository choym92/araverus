<!-- Updated: 2026-02-18 -->
# 4.2 — News Frontend Improvements

## Problem
Today tab fetches 30 articles, but threads span days/weeks. A 17-article thread might show only 2 articles on Today, making it look insignificant. Heat score and collapse are computed on the fetched subset, not the full thread.

## Options
- Move thread grouping to Stories tab (Today = simple chronological)
- Show "(2 of 17)" with "See full story →" link to detail/Stories tab
- Use thread title as a label/tag on cards, not a grouping mechanism
- Fetch all recent members of any thread that appears in the top 30

---

## Summary & Embedding Quality Improvement

### Done
- `llm_analysis.py`: removed 800-char limit → full crawled content
- `llm_analysis.py`: summary prompt → "150-250 words, no title repetition"
- `wsj_llm_analysis` RLS: added anon SELECT policy (summaries were invisible on frontend)
- `getNewsItemBySlug()`: removed `relevance_flag` filter + `!inner` join (404 fix)
- Detail page: summary fallback to longer of summary/description

### TODO
1. Sync `llm_analysis.py` change to Mac Mini pipeline
2. Re-backfill summaries for existing articles (new prompt)
3. Update `embed_and_thread.py` to use `title + summary` instead of `title + description`
4. Re-generate embeddings
5. Re-run threading with improved embeddings
6. and more...